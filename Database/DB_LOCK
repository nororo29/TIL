DB_LOCK

Deadlock

s1 : insert 1111 : lock_mode S : 
s2 : insert 1111 : lock_mode X : lock_waits -> insert구문 exclusive lock(X)
s3 : insert 1111 : lock_mode S : lock_waits -> insert구문 duplicate 체크 -> duplicate 에러 shared lock 먼저 시도

Lock 종류
Shared Lock(S) : select
Exclusive Lock(X) : insert/update/delete -> S락에도 적용됨

Lock 단위
RID 행
KEY 인덱스 있을 때 행
PAGE 데이터 페이지, 인덱스 페이지
EXTENT 
TABLE
DB

Transaction Isolation level (잠금 수준)
Read uncommitted < read committed < repeatable read < serializble

Blocking 경합
특정 세션이 작업을 진행하지 못하고 멈춘 상태 -> transaction commit 또는 rollback
동일한 데이터 동시 변경하지 않도록 설계
lock timeout ㅅㅓㄹ정..

Dead Lock
트랜젝션 교착관계
1번 트랜젝션, 2번 트랜젝션 동시에 상대방의 로우에 접근하려고 할 때...
1번 트랜잭션 shared lock -> sleep / 2번 E lock 설정하려고 할 때... 무기한 교착상태.
