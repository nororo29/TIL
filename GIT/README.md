## GIT

# branch
독립적으로 어떤 작업을 진행하기 위한 개념, "작업 단위"

master branch : 저장소를 처음 만들면 생기는 branch. master가 아닌 새로운 브랜치를 만들어서 체크아웃(checkout)하지 않는 이상, 모든 작업은 master에서 이루어 진다.

# branch의 종류
### * 통합 브랜치(Integration Branch)
언제든지 배포할 수 있는 버전

### * 토픽 브랜치(Topic Branch)
기능 추가나 버그 수정과 같은 단위 작업을 위한 브랜치

토픽 브랜치는 보통 통합 브랜치로부터 만들어 내며, 특정 작업이 완료되면 다시 통합 브랜치로 병합하는 방식으로 진행한다.

# branch 전환
체크아웃(checkout) 명령어를 통해 현재 브랜치에서 원하는 브랜치로 전환할 수 있다. 전환한 브랜치 안에 있는 마지막 커밋 내용들이 작업 트리에 펼쳐지고, 체크아웃 이후에 실행되는 커밋은 전환한 브랜치에 추가된다.

### * HEAD
'HEAD'란 현재 사용 중인 브랜치의 선두 부분을 나타내는 이름이다. 

### * stash
커밋하지 않은 변경 내용들이 인덱스나 작업트리에 남아있는 상태로 브랜치를 전환(checkout)하면 전환된 브랜치에서 커밋할 수 있다. 

단, 해당 내용이 전환된 브랜치에서도 변경된 사항이 있으면 체크아웃에 실패할 수 있다. 이 경우, 전환 전에 변경 내용을 커밋하거나 *stash를 이용해 일시적으로 다른 곳에 변경 내용을 저장해 충돌을 피한 뒤 체크아웃을 해야한다.

*stash에 저장된 내용들은 나중에 다시 불러와 원래 브랜치나 다른 브랜치에 커밋할 수 있다.

# branch 통합
작업이 완료된 토픽 브랜치는 merge, rebase 2가지 방법을 사용하여 최종적으로 통합 브랜치에 병합된다.

### * merge
fast-forward(빨리감기) 병합 : 토픽브랜치가 통합브랜치의 이력을 모두 가지고 있는 경우 통합브랜치는 단순히 이동만으로 토픽브랜치 내용 적용이 가능하다.

merge commit : 토픽브랜치가 통합브랜치로부터 분기된 이후에 통합브랜치에 여러 변경사항이 있을 경우, 통합브랜치와 토픽브랜치 모두의 변경 내용을 병합(merge)할 필요가 있다. 병합한 후 통합브랜치로 commit하게 된다.

### * rebase
토픽브랜치를 통합브랜치로 rebase하면, 토픽브랜치 이력이 통합브랜치의 변경 이력과 상관없이 그 이후로 이동한다. 충돌할 경우 수정이 필요하다.

rebase만 하면 master 위치는 그대로 유지되기 때문에 master 위치를 fast-forward 방법으로 이동시켜준다.

주로 토픽브랜치에 통합브랜치의 최신코드를 적용할 경우에 rebase를 사용한다.
통합브랜치에 토픽브랜치를 불러올 경우에는 rebase 후에 merge한다.

# A successful Git branching model 
http://nvie.com/posts/a-successful-git-branching-model/

### 메인 브랜치(Main branch)
master, develop 주로 이 두 종류의 브랜치를 메인 브랜치로 사용한다.

### 피처 브랜치(Feature branch)
= 토픽 브랜치, 기본적으로 공유할 필요가 없기 때문에 원격으로 관리하지 않는다. 개발 완료 후 develop 브랜치에 병합하여 공유한다.

### 릴리즈 브랜치(release branch)
모든 기능이 정상 작동하는지 확인하는 브랜치이다. 기능을 점검 , 최종적인 버그 수정 등의 개발을 한다. 배포 상태가 가능하면 master 브랜치에 병합한다. 버그 수정 작업은 develop 브랜치에도 병합 해 반영해준다.

브랜치 이름 앞에 'release-' 를 붙인다.

### 핫픽스 브랜치(Hotfix branch)
배포한 버전을 긴급하게 수정할 경우 master 브랜치에서 분기하는 브랜치이다. 변경사항은 master, develop 모두 병합하여 처리한다.

브랜치 이름 앞에 'hotfix-'를 붙인다.

---

### 참고
https://backlog.com/git-tutorial/kr/stepup/stepup1_1.html
